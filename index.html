<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>EchoingTide1822 - James Gill</title>

  <style>
    :root{
      --panel-bg: rgba(10,10,30,0.55);
      --accent-cyan: #00ffff;
      --accent-magenta: #ff00ff;
      --text-color: #e6e9ff;
      --muted: #97a0ff;
      --panel-blur: 8px;
      --bg-color: #000;
    }
    [data-theme="ocean"]{
      --panel-bg: rgba(0,30,50,0.65);
      --accent-cyan: #00d4ff;
      --accent-magenta: #0088ff;
      --text-color: #d0f0ff;
      --muted: #7ac5ff;
      --bg-color: #001a2e;
    }
    [data-theme="forest"]{
      --panel-bg: rgba(10,35,15,0.65);
      --accent-cyan: #00ff88;
      --accent-magenta: #88ff00;
      --text-color: #d8ffe8;
      --muted: #7dff99;
      --bg-color: #0a1f0a;
    }
    [data-theme="sunset"]{
      --panel-bg: rgba(50,20,10,0.65);
      --accent-cyan: #ff8800;
      --accent-magenta: #ff0066;
      --text-color: #ffe8d0;
      --muted: #ffaa77;
      --bg-color: #1a0f00;
    }
    [data-theme="purple"]{
      --panel-bg: rgba(40,10,50,0.65);
      --accent-cyan: #cc00ff;
      --accent-magenta: #ff00cc;
      --text-color: #f0d0ff;
      --muted: #d088ff;
      --bg-color: #1a001a;
    }
    [data-theme="neon"]{
      --panel-bg: rgba(10,10,30,0.55);
      --accent-cyan: #00ffff;
      --accent-magenta: #ff00ff;
      --text-color: #e6e9ff;
      --muted: #97a0ff;
      --bg-color: #000;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;background:var(--bg-color);color:var(--text-color);transition:background-color 0.6s ease}
    .video-background{position:fixed;inset:0;z-index:0;overflow:hidden;background:var(--bg-color);transition:opacity .6s ease}
    .video-background video{position:absolute;top:50%;left:50%;min-width:100%;min-height:100%;transform:translate(-50%,-50%);object-fit:cover;filter:contrast(1.02) saturate(1.05) brightness(0.9);image-rendering:-webkit-optimize-contrast;image-rendering:-webkit-crisp-edges;image-rendering:crisp-edges}
    .video-background video::-webkit-media-controls{display:none !important}
    .video-background video::-webkit-media-controls-enclosure{display:none !important}
    .retro-overlay{position:fixed;inset:0;z-index:1;pointer-events:none;background-image:linear-gradient(transparent 60%, rgba(0,0,0,0.12) 100%), radial-gradient(circle at 50% 10%, rgba(255,255,255,0.03), transparent 20%);mix-blend-mode:overlay}

    /* Blackout overlay for fade-to-black */
    #blackout{position:fixed;inset:0;background:#000;z-index:9000;opacity:0;pointer-events:none;transition:opacity .8s ease;display:none}
    #blackout.show{display:block}
    #blackout.visible{opacity:1}

    .container{position:relative;z-index:2;min-height:100vh;display:flex;flex-direction:column;gap:1rem;align-items:center;padding:3.5rem 1rem}

    /* High-contrast top bar */
    .topbar{width:min(1100px,100%);background:rgba(0,0,0,0.55);border:1px solid rgba(255,255,255,0.08);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:14px;padding:1rem 1rem 1.1rem;box-shadow:0 8px 30px rgba(0,0,0,0.35)}
    h1{font-size:clamp(1.4rem,2.6vw,2.2rem);text-align:center;margin-bottom:.7rem;text-shadow:0 2px 10px rgba(0,0,0,.65)}
    .controls{display:flex;gap:.6rem;align-items:center;flex-wrap:wrap;justify-content:center}
    .btn{display:inline-flex;align-items:center;gap:.5rem;background:rgba(0,0,0,0.55);color:var(--text-color);border:1px solid rgba(255,255,255,0.16);padding:.6rem 1rem;border-radius:999px;cursor:pointer;transition:transform .18s,box-shadow .18s,background .2s;font-weight:600}
    .btn:hover{transform:translateY(-2px);box-shadow:0 10px 28px rgba(0,0,0,.55);background:rgba(0,0,0,0.7)}
    .linkedin-btn{background:linear-gradient(90deg,#0077b5,#00a0dc);color:#fff;border:none;padding:.6rem 1rem}
    .panels{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1rem;width:min(1100px,100%);margin:0 auto}
    .panel{background:var(--panel-bg);border-radius:12px;padding:1rem;box-shadow:0 8px 30px rgba(16,14,28,0.6);-webkit-backdrop-filter:blur(var(--panel-blur));backdrop-filter:blur(var(--panel-blur));border:1px solid rgba(255,255,255,0.08);transition:transform .22s,box-shadow .22s,background-color 0.4s ease;min-height:90px;position:relative;cursor:pointer}
    .panel:hover{transform:translateY(-3px);box-shadow:0 12px 40px rgba(16,14,28,0.8)}
    .panel[aria-expanded="true"]{transform:translateY(-6px)}
    .panel h3{color:var(--muted);font-size:1rem;margin-bottom:.4rem;display:flex;justify-content:space-between;align-items:center;gap:.5rem;pointer-events:none}
    .panel .body{color:var(--text-color);line-height:1.45;margin-top:0.5rem}
    .panel .body ul{padding-left:1.1rem}
    .panel .body li{margin:.25rem 0}
    .panel .body h4{margin:.6rem 0 .25rem;color:var(--accent-cyan);font-size:1rem}
    footer{margin-top:1.25rem;color:rgba(151,160,255,0.85);font-size:.9rem;text-align:center}

    /* Hidden celebrate button */
    #hiddenCelebrate{position:fixed;bottom:20px;right:20px;width:60px;height:60px;background:transparent;border:none;cursor:pointer;z-index:9999;opacity:0}
    #hiddenCelebrate:hover{opacity:0.1}

    /* Warp speed overlay */
    .warp-overlay{position:fixed;inset:0;z-index:10000;pointer-events:none;display:none;overflow:hidden}
    .warp-overlay.active{display:block}
    .star{position:absolute;background:white;border-radius:50%;will-change:transform,width,height,opacity}

    /* cursor trail */
    .cursor-core{position:fixed;width:16px;height:16px;border-radius:50%;background:radial-gradient(circle, var(--accent-cyan), var(--accent-magenta));pointer-events:none;z-index:9999;mix-blend-mode:screen;transform:translate(-50%,-50%);opacity:.95;transition:transform .06s linear;box-shadow:0 0 20px var(--accent-cyan), 0 0 40px var(--accent-magenta);display:none}
    .cursor-trail-dot{position:fixed;border-radius:50%;pointer-events:none;z-index:9998;mix-blend-mode:screen;transition:transform .08s linear,opacity .2s linear}

    @media(max-width:520px){
      .container{padding:2rem 1rem}
      .topbar{padding:.9rem}
    }
    .warp-overlay video.warp-player{
  position:absolute;inset:0;width:100%;height:100%;object-fit:cover;
  background:#000; /* ensures no see-through edges */
}
  </style>
</head>
<body data-theme="neon">
  <!-- Video + overlay -->
  <div class="video-background" aria-hidden="true" id="videoBg">
    <video autoplay muted loop id="bg-video" preload="auto" disablePictureInPicture poster="">
      <source src="background-final.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>
  <div class="retro-overlay" aria-hidden="true"></div>
  <div class="warp-overlay" id="warpOverlay"></div>
  <div id="blackout"></div>

  <main class="container">
    <div class="topbar">
      <h1>Career Lifeline – James Gill</h1>
      <div class="controls" role="toolbar" aria-label="Page controls">
        <a class="btn linkedin-btn" href="https://linkedin.com/in/james-gill-echoing1822tide" target="_blank" rel="noopener noreferrer">Connect on LinkedIn</a>
        <button id="themeToggleBtn" class="btn" title="Toggle theme (T)">Toggle Theme</button>
        <button id="mouseTrailToggleBtn" class="btn" title="Toggle mouse trail (M)">Mouse Trail</button>
      </div>
    </div>

    <section class="panels" id="panels" aria-live="polite">
      <article class="panel" data-index="0" aria-expanded="false" tabindex="0">
        <h3><span>1. Job Title</span></h3>
        <div class="body" hidden>
          <p>
            Electrical Power Production Craftsman →
            Power Production Supervisor →
            Contingency Training Supervisor →
            Team Lead / SME (BEAR, TFS, WRM, AMMPS) →
            Software Developer-in-Training (MSSA Cloud Application Development)
          </p>
        </div>
      </article>

      <article class="panel" data-index="1" aria-expanded="false" tabindex="0">
        <h3><span>2. Age</span></h3>
        <div class="body" hidden>
          <ul>
            <li>18–20: Trainee, Apprentice Power Production</li>
            <li>21–25: Journeyman, Iraq/Afghanistan deployments, crisis operations</li>
            <li>26–30: Senior Craftsman, program builder, inspection reform</li>
            <li>31–35: NCOIC roles, global deployments, instructor-level performance</li>
            <li>36–38: Senior NCO, Workforce leader, Equipment Custodian for $258M assets</li>
            <li>38: Software Development student (C#, Azure, GitHub), MSSA Cohort CCAD21</li>
          </ul>
        </div>
      </article>

      <article class="panel" data-index="2" aria-expanded="false" tabindex="0">
        <h3><span>3. Likes</span></h3>
        <div class="body" hidden>
          <ul>
            <li>Building systems — generators, logistics programs, and now software.</li>
            <li>Solving problems under pressure — rockets, mortars, broken systems, bureaucracy.</li>
            <li>Teaching and mentoring — hundreds trained, supervisors coached, teams elevated.</li>
            <li>Structure with freedom — clear mission, with room to improve the process.</li>
            <li>Technology — PC building, AMMPS, C#, Visual Studio, GitHub, cloud apps.</li>
            <li>Meaningful work — missions that protect people or improve lives.</li>
            <li>Innovation — inspection toolsets, tracking systems, training programs.</li>
            <li>Calm environments — desert nights, storms, ocean waves, wide open spaces.</li>
            <li>Perseverance — thriving in challenges that require grit.</li>
          </ul>
        </div>
      </article>

      <article class="panel" data-index="3" aria-expanded="false" tabindex="0">
        <h3><span>4. Dislikes</span></h3>
        <div class="body" hidden>
          <ul>
            <li>Micromanagement — prefer trust, mission clarity, and autonomy.</li>
            <li>Broken systems with no intent to fix them — always improve what you touch.</li>
            <li>Pretension and arrogance — value humility and genuine leadership.</li>
            <li>Stagnation — need growth, movement, and learning.</li>
            <li>Toxic leadership — punishing instead of developing people.</li>
            <li>Inefficiency and sloppy processes — a zero-tolerance streak.</li>
            <li>Light pollution, noisy crowds, claustrophobic environments — prefer open horizons.</li>
            <li>Disloyalty and dishonesty — self-explanatory.</li>
          </ul>
        </div>
      </article>

      <article class="panel" data-index="4" aria-expanded="false" tabindex="0">
        <h3><span>5. Transferable Skills</span></h3>
        <div class="body" hidden>
          <h4>Leadership & People Development</h4>
          <ul>
            <li>Led 3–55 personnel across multiple missions and deployments.</li>
            <li>Lead Trainer — trained 800+ supervisors/managers on leadership, performance, and compliance.</li>
            <li>Mentored dozens of Airmen, accelerating upgrade training by months.</li>
            <li>Taught complex tasks under pressure (MAAS, BEAR Program, TFS systems, generator systems).</li>
          </ul>

          <h4>Systems Thinking & Process Design</h4>
          <ul>
            <li>Built a 2,022-line inspection system used across 12 programs.</li>
            <li>Created tracking databases and standardization toolsets.</li>
            <li>Identified inefficiencies and resolved multi-year backlogs.</li>
            <li>Designed operational checklists, packing plans, and workflow improvements.</li>
          </ul>

          <h4>Technical Problem Solving</h4>
          <ul>
            <li>Diagnosed and repaired high-value power systems (5kW–12.7kW).</li>
            <li>Managed $258M in global equipment, 428 UTCs, 12.5K O&M tasks.</li>
            <li>Executed global deployments supporting 11–16 CCMDs.</li>
            <li>Troubleshot AMMPS, generators, high-voltage, TFS, MAAS, and LAMS.</li>
            <li>BIOS/OS troubleshooting, PC rebuilds, electrical + mechanical foundation.</li>
          </ul>

          <h4>Operational & Project Management</h4>
          <ul>
            <li>Oversaw $4.6M in projects and contracts across 55 locations.</li>
            <li>Led airfield recovery operations protecting $1.2B in fighter aircraft.</li>
            <li>Managed logistics for 6–24 UTC deployments under urgent deadlines.</li>
            <li>Coordinated joint operations with Army, Marines, NATO, and international partners.</li>
          </ul>

          <h4>Instruction, Communication, UX Mindset</h4>
          <ul>
            <li>Built structured, user-focused systems to simplify compliance and operations.</li>
            <li>Designed training modules — clear, repeatable, “user-friendly” (early UX talent).</li>
            <li>Communicated across ranks and cultures, bridging technical and human needs.</li>
          </ul>

          <h4>Software & Cloud Foundations (MSSA + Microsoft Learn)</h4>
          <ul>
            <li>Completed 6 Learning Paths, 38 Modules, 33+ hours of Microsoft C# training.</li>
            <li>Passed all module assessments with full mastery.</li>
            <li>Earned Foundational C# Developer Certification (Microsoft + FreeCodeCamp).</li>
            <li>Built working console applications; debugged systems; implemented logic, arrays, exceptions.</li>
            <li>Actively developing cloud development skills (C#, .NET, GitHub, Azure).</li>
          </ul>

          <h4>Mindset</h4>
          <ul>
            <li>Resilient — operated under rockets, mortars, combat conditions.</li>
            <li>Mission-driven — shows up every time, no excuses.</li>
            <li>Fast learner — BA, C#, MSSA prerequisites, deployed duties.</li>
            <li>Systems builder — not just fixing problems; redesigning the blueprint.</li>
          </ul>
        </div>
      </article>
    </section>

    <footer>© 2025 EchoingTide1822 - James Gill</footer>
  </main>

  <!-- Hidden celebrate button -->
  <button id="hiddenCelebrate" aria-label="Secret celebration"></button>

  <!-- cursor elements -->
  <div id="cursorCore" class="cursor-core" aria-hidden="true"></div>

  <script>
const $ = s => document.querySelector(s);
let isCinematic = false;

// Reattach button after load
document.addEventListener('DOMContentLoaded', () => {
  const btn = $('#hiddenCelebrate');
  if (btn) btn.addEventListener('click', startCinematic);
});

/*
  Multi‑video cinematic (no supernova):
  Sequence: 4 videos crossfaded.
  - Screensaver-1.mp4 keeps normal speed, then ramps UP before crossfade so video 2 matches.
  - Videos 2 & 3 play at steady TARGET_RATE.
  - Video 4 plays at TARGET_RATE then slows over LAST_SLOWDOWN_SEC.
  - Each crossfade overlaps by CROSSFADE_SEC.
  Adjust constants below if needed.
*/
function startCinematic() {
  if (isCinematic) return;
  isCinematic = true;

  const overlay = $('#warpOverlay');
  const bgVideo = $('#bg-video');
  const videoBg = $('#videoBg');
  if (!overlay) { isCinematic = false; return; }

  if (bgVideo) { try { bgVideo.pause(); } catch {} }
  if (videoBg) videoBg.style.opacity = '0';

  overlay.classList.add('active');
  overlay.innerHTML = '';

  const SEQ_SOURCES = [
    'Screensaver-1.mp4',
    'Screensaver-2.mp4',
    'Screensaver-3.mp4',
    'Screensaver-4.mp4'
  ];

  // Tuning
  const CROSSFADE_SEC = 3;          // overlap duration between videos
  const FIRST_RAMP_SEC = 5;         // length of ramp segment in video 1
  const TARGET_RATE = 1.25;         // steady speed for videos 2 & 3 (and start of 4)
  const LAST_SLOWDOWN_SEC = 2;      // deceleration window at end of video 4
  const LAST_FINAL_RATE = 0.7;      // final slowed rate at exact end of video 4
  const FADE_EASE = 'linear';       // opacity transition timing

  let index = 0;
  let current = null;
  let next = null;
  let rateRAF = null;

  playIndex(index);

  function createVideo(src) {
    const v = document.createElement('video');
    v.className = 'warp-player';
    v.muted = true;
    v.playsInline = true;
    v.autoplay = true;
    v.preload = 'auto';
    v.loop = false;
    v.setAttribute('disablePictureInPicture','');
    v.setAttribute('controlslist','nodownload nofullscreen noremoteplayback');
    v.style.opacity = '0';
    v.style.transition = `opacity .6s ${FADE_EASE}`;
    const s = document.createElement('source');
    s.src = src;
    s.type = 'video/mp4';
    v.appendChild(s);
    return v;
  }

  function playIndex(i) {
    if (i >= SEQ_SOURCES.length) {
      finish();
      return;
    }
    current = createVideo(SEQ_SOURCES[i]);
    overlay.appendChild(current);

    // Autoplay attempt
    current.play().catch(() => {
      const resume = () => { current.play().catch(()=>{}); document.removeEventListener('click', resume, true); };
      document.addEventListener('click', resume, true);
    });

    current.addEventListener('loadeddata', () => {
      requestAnimationFrame(() => current.style.opacity = '1');
    });

    current.addEventListener('error', () => {
      // Skip faulty video
      playNext();
    });

    current.addEventListener('ended', () => {
      // If ended before crossfade scheduled (very short), advance
      playNext();
    });

    // Preload next
    if (i + 1 < SEQ_SOURCES.length) {
      next = createVideo(SEQ_SOURCES[i + 1]);
      overlay.appendChild(next);
    } else {
      next = null;
    }

    // Once metadata known, set up timing logic
    current.addEventListener('loadedmetadata', () => {
      setupRateControlForCurrent(i);
      if (next) {
        // Prepare crossfade scheduling
        const dur = current.duration;
        const fadeStart = Math.max(0, dur - CROSSFADE_SEC);
        scheduleCrossfade(fadeStart);
      } else {
        // Last video: just wait for slowdown & normal end
        if (i === SEQ_SOURCES.length - 1) {
          // Nothing extra; slowdown handled in rate control
        }
      }
    });
  }

  function scheduleCrossfade(startTime) {
    function check() {
      if (!current) return;
      if (current.currentTime >= startTime) {
        startCrossfade();
      } else {
        requestAnimationFrame(check);
      }
    }
    requestAnimationFrame(check);
  }

  function startCrossfade() {
    if (!next) return;
    // Ensure next begins from start at target speed (will be set by its own rate logic)
    next.play().catch(()=>{});
    const durMs = CROSSFADE_SEC * 1000;
    next.style.transition = `opacity ${CROSSFADE_SEC}s ${FADE_EASE}`;
    current.style.transition = `opacity ${CROSSFADE_SEC}s ${FADE_EASE}`;
    requestAnimationFrame(() => {
      next.style.opacity = '1';
      current.style.opacity = '0';
    });
    setTimeout(() => {
      if (current) current.remove();
      index++;
      current = next;
      next = null;
      playIndex(index);
    }, durMs + 60);
  }

  function playNext() {
    index++;
    if (current) current.remove();
    if (next) {
      current = next;
      next = null;
      current.style.opacity = '1';
      current.play().catch(()=>{});
      playIndex(index);
    } else {
      finish();
    }
  }

  function setupRateControlForCurrent(i) {
    cancelRateLoop();
    const v = current;
    if (!v || !isFinite(v.duration) || v.duration <= 0) return;

    const dur = v.duration;
    // Compute ramp window for first video: ends at (dur - CROSSFADE_SEC)
    const rampEnd = Math.max(0, dur - CROSSFADE_SEC);
    const rampStart = Math.max(0, rampEnd - FIRST_RAMP_SEC);

    function rateLoop() {
      if (!v) return;
      const t = v.currentTime;

      // Default desired rate
      let desiredRate = 1;

      if (i === 0) {
        // Video 1: base 1 → ramp to TARGET_RATE over [rampStart, rampEnd]
        if (t <= rampStart) {
          desiredRate = 1;
        } else if (t >= rampEnd) {
          desiredRate = TARGET_RATE;
        } else {
          const p = (t - rampStart) / (rampEnd - rampStart);
          // Ease (cubic)
            desiredRate = 1 + (TARGET_RATE - 1) * (p < 0.5 ? 4*p*p*p : 1 - Math.pow(-2*p+2,3)/2);
        }
      } else if (i === SEQ_SOURCES.length - 1) {
        // Last video: steady TARGET_RATE then slow in last LAST_SLOWDOWN_SEC
        const slowStart = Math.max(0, dur - LAST_SLOWDOWN_SEC);
        if (t < slowStart) {
          desiredRate = TARGET_RATE;
        } else {
          const p = (t - slowStart) / Math.max(0.0001, (dur - slowStart));
          // Ease out for deceleration
          desiredRate = TARGET_RATE - (TARGET_RATE - LAST_FINAL_RATE) * (1 - Math.pow(1 - p, 3));
        }
      } else {
        // Middle videos: constant TARGET_RATE
        desiredRate = TARGET_RATE;
      }

      if (Math.abs(v.playbackRate - desiredRate) > 0.01) {
        v.playbackRate = desiredRate;
      }
      rateRAF = requestAnimationFrame(rateLoop);
    }
    rateLoop();
  }

  function cancelRateLoop() {
    if (rateRAF) cancelAnimationFrame(rateRAF);
    rateRAF = null;
  }

  function finish() {
    cancelRateLoop();
    overlay.classList.remove('active');
    overlay.innerHTML = '';
    const videoBg = $('#videoBg');
    const bgVideo = $('#bg-video');
    if (videoBg) videoBg.style.opacity = '1';
    if (bgVideo) { try { bgVideo.play(); } catch {} }
    isCinematic = false;
  }
}

// Existing site features (panels, theme, mouse trail)
const themes = ['neon','ocean','forest','sunset','purple'];
let currentThemeIndex = 0;

document.addEventListener('DOMContentLoaded', () => {
  loadTheme();
  initPanels();
  initControls();
  autoplayBackground();
});

function autoplayBackground(){
  const v = $('#bg-video');
  if (v) v.play().catch(()=>{
    const resume = () => { v.play().catch(()=>{}); document.removeEventListener('click', resume, true); };
    document.addEventListener('click', resume, true);
  });
}

function initPanels() {
  document.querySelectorAll('.panel').forEach(p=>{
    const body = p.querySelector('.body');
    p.addEventListener('click', ()=>togglePanel(p,body));
    p.addEventListener('keydown', e=>{
      if (e.key==='Enter' || e.key===' ') {
        e.preventDefault();
        togglePanel(p,body);
      }
    });
  });
}
function togglePanel(panel, body){
  const open = panel.getAttribute('aria-expanded')==='true';
  panel.setAttribute('aria-expanded', String(!open));
  body.hidden = open;
}

function loadTheme(){
  const stored = localStorage.getItem('site-theme') || 'neon';
  currentThemeIndex = themes.indexOf(stored);
  if (currentThemeIndex < 0) currentThemeIndex = 0;
  document.body.setAttribute('data-theme', themes[currentThemeIndex]);
}
function toggleTheme(){
  currentThemeIndex = (currentThemeIndex + 1) % themes.length;
  const t = themes[currentThemeIndex];
  document.body.setAttribute('data-theme', t);
  localStorage.setItem('site-theme', t);
}

let mouseTrailEnabled=false;
let trailDots=[];
const trailCount=25;
let mousePos={x:0,y:0};

function enableMouseTrail(){
  if (mouseTrailEnabled) return;
  mouseTrailEnabled=true;
  const core=$('#cursorCore');
  core.style.display='block';
  for(let i=0;i<trailCount;i++){
    const d=document.createElement('div');
    d.className='cursor-trail-dot';
    const size=12-(i*0.4);
    d.style.width=size+'px';
    d.style.height=size+'px';
    const hue=(i*15)%360;
    d.style.background=`hsl(${hue},100%,60%)`;
    d.style.boxShadow=`0 0 ${size*2}px hsl(${hue},100%,60%)`;
    document.body.appendChild(d);
    trailDots.push({el:d,x:0,y:0});
  }
  document.addEventListener('mousemove', onMouse);
  requestAnimationFrame(animateTrail);
}
function disableMouseTrail(){
  if(!mouseTrailEnabled) return;
  mouseTrailEnabled=false;
  $('#cursorCore').style.display='none';
  trailDots.forEach(d=>d.el.remove());
  trailDots=[];
  document.removeEventListener('mousemove', onMouse);
}
function onMouse(e){ mousePos.x=e.clientX; mousePos.y=e.clientY; }
function animateTrail(){
  if(!mouseTrailEnabled) return;
  const core=$('#cursorCore');
  core.style.left=mousePos.x+'px';
  core.style.top=mousePos.y+'px';
  trailDots.forEach((dot,idx)=>{
    const target=idx===0?mousePos:trailDots[idx-1];
    dot.x+=(target.x-dot.x)*0.3;
    dot.y+=(target.y-dot.y)*0.3;
    dot.el.style.left=dot.x+'px';
    dot.el.style.top=dot.y+'px';
    dot.el.style.opacity=String(1-(idx*0.03));
  });
  requestAnimationFrame(animateTrail);
}

function initControls(){
  const themeBtn = $('#themeToggleBtn');
  const trailBtn = $('#mouseTrailToggleBtn');
  if (themeBtn) themeBtn.addEventListener('click', toggleTheme);
  if (trailBtn) trailBtn.addEventListener('click', ()=>{
    if(mouseTrailEnabled){ disableMouseTrail(); trailBtn.textContent='Mouse Trail'; }
    else { enableMouseTrail(); trailBtn.textContent='Mouse Trail (On)'; }
  });
  document.addEventListener('keydown', e=>{
    if (e.key.toLowerCase()==='t') toggleTheme();
    if (e.key.toLowerCase()==='m' && trailBtn) trailBtn.click();
  });
}
</script>
</body>
</html>